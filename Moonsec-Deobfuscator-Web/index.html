<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moonsec Lua Deobfuscator</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üîê</text></svg>">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">
                <div class="logo-icon">üîê</div>
                <div>
                    <h1>Moonsec Lua Deobfuscator</h1>
                    <p class="tagline">Pure browser-based Lua deobfuscation tool</p>
                </div>
            </div>
            <div class="github-badge">
                <a href="https://github.com/YOUR_USERNAME/Moonsec-Deobfuscator-Web" target="_blank" class="github-link">
                    <i class="fab fa-github"></i> View on GitHub
                </a>
            </div>
        </header>

        <main class="main-content">
            <!-- Input Section -->
            <section class="card">
                <div class="card-header">
                    <h2><i class="fas fa-file-code"></i> Input Lua Code</h2>
                    <div class="card-actions">
                        <button id="loadExample" class="btn btn-outline">
                            <i class="fas fa-code"></i> Load Example
                        </button>
                        <button id="clearInput" class="btn btn-outline">
                            <i class="fas fa-trash"></i> Clear
                        </button>
                        <button id="analyzeBtn" class="btn btn-info">
                            <i class="fas fa-chart-bar"></i> Analyze
                        </button>
                    </div>
                </div>
                <div class="editor-container">
                    <textarea id="inputCode" placeholder="Paste your obfuscated Lua code here..." spellcheck="false"></textarea>
                    <div class="editor-footer">
                        <div class="stats">
                            <span id="charCount">0 characters</span>
                            <span id="lineCount">0 lines</span>
                        </div>
                        <div class="actions">
                            <button id="pasteFromClipboard" class="btn-small">
                                <i class="fas fa-paste"></i> Paste
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Deobfuscation Controls -->
            <section class="controls-section">
                <div class="controls-grid">
                    <button id="deobfuscateBtn" class="btn btn-primary btn-lg">
                        <i class="fas fa-magic"></i> Deobfuscate Code
                    </button>
                    <button id="batchProcess" class="btn btn-secondary btn-lg">
                        <i class="fas fa-layer-group"></i> Batch Process
                    </button>
                    <div class="settings-toggle">
                        <button id="toggleSettings" class="btn btn-outline">
                            <i class="fas fa-cog"></i> Settings
                        </button>
                    </div>
                </div>
                
                <!-- Settings Panel (Collapsed by default) -->
                <div id="settingsPanel" class="settings-panel" style="display: none;">
                    <h3><i class="fas fa-sliders-h"></i> Deobfuscation Settings</h3>
                    <div class="settings-grid">
                        <div class="setting-item">
                            <label class="switch">
                                <input type="checkbox" id="autoFormat" checked>
                                <span class="slider"></span>
                            </label>
                            <span>Auto-format output</span>
                        </div>
                        <div class="setting-item">
                            <label class="switch">
                                <input type="checkbox" id="extractStrings" checked>
                                <span class="slider"></span>
                            </label>
                            <span>Extract strings</span>
                        </div>
                        <div class="setting-item">
                            <label class="switch">
                                <input type="checkbox" id="removeJunk" checked>
                                <span class="slider"></span>
                            </label>
                            <span>Remove junk code</span>
                        </div>
                        <div class="setting-item">
                            <label class="switch">
                                <input type="checkbox" id="highlightSyntax" checked>
                                <span class="slider"></span>
                            </label>
                            <span>Syntax highlighting</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Output Section -->
            <section class="card">
                <div class="card-header">
                    <h2><i class="fas fa-code"></i> Deobfuscated Output</h2>
                    <div class="card-actions">
                        <button id="copyOutput" class="btn btn-outline" disabled>
                            <i class="fas fa-copy"></i> Copy
                        </button>
                        <button id="downloadOutput" class="btn btn-success" disabled>
                            <i class="fas fa-download"></i> Download
                        </button>
                        <button id="saveSession" class="btn btn-outline">
                            <i class="fas fa-save"></i> Save
                        </button>
                    </div>
                </div>
                <div class="editor-container">
                    <pre id="outputCode"></pre>
                    <div class="editor-footer">
                        <div class="stats">
                            <span id="outputCharCount">0 characters</span>
                            <span id="outputLineCount">0 lines</span>
                            <span id="processingTime" class="time-badge">0ms</span>
                        </div>
                        <div class="actions">
                            <button id="toggleTheme" class="btn-small">
                                <i class="fas fa-moon"></i> Theme
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Analysis Results -->
            <section id="analysisResults" class="card" style="display: none;">
                <div class="card-header">
                    <h2><i class="fas fa-chart-pie"></i> Analysis Results</h2>
                    <button id="closeAnalysis" class="btn-icon">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div id="analysisContent" class="analysis-grid"></div>
            </section>

            <!-- Info Cards -->
            <section class="info-cards">
                <div class="info-card">
                    <div class="info-icon">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <h3>Client-Side Processing</h3>
                    <p>All processing happens in your browser. No data is sent to any server.</p>
                </div>
                
                <div class="info-card">
                    <div class="info-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3>Privacy First</h3>
                    <p>Your code never leaves your computer. Perfect for sensitive scripts.</p>
                </div>
                
                <div class="info-card">
                    <div class="info-icon">
                        <i class="fas fa-rocket"></i>
                    </div>
                    <h3>Instant Results</h3>
                    <p>Fast deobfuscation with real-time feedback and no upload delays.</p>
                </div>
            </section>

            <!-- Features Grid -->
            <section class="features-section">
                <h2><i class="fas fa-star"></i> Features</h2>
                <div class="features-grid">
                    <div class="feature">
                        <i class="fas fa-key"></i>
                        <h4>Base64 Decoding</h4>
                        <p>Automatically detect and decode base64 encoded strings</p>
                    </div>
                    <div class="feature">
                        <i class="fas fa-link"></i>
                        <h4>String Concatenation</h4>
                        <p>Resolve complex string concatenation patterns</p>
                    </div>
                    <div class="feature">
                        <i class="fas fa-search"></i>
                        <h4>Pattern Detection</h4>
                        <p>Identify common Moonsec obfuscation patterns</p>
                    </div>
                    <div class="feature">
                        <i class="fas fa-code-branch"></i>
                        <h4>Loadstring Analysis</h4>
                        <p>Extract and analyze loadstring calls</p>
                    </div>
                    <div class="feature">
                        <i class="fas fa-file-export"></i>
                        <h4>Export Options</h4>
                        <p>Download, copy, or save deobfuscated code</p>
                    </div>
                    <div class="feature">
                        <i class="fas fa-eye"></i>
                        <h4>Code Analysis</h4>
                        <p>Detailed analysis of obfuscation techniques used</p>
                    </div>
                </div>
            </section>
        </main>

        <footer class="footer">
            <div class="footer-content">
                <div class="footer-brand">
                    <div class="footer-logo">üîê</div>
                    <div>
                        <h3>Moonsec Deobfuscator</h3>
                        <p>Pure browser-based Lua deobfuscation tool</p>
                    </div>
                </div>
                <div class="footer-links">
                    <a href="https://github.com/tupsutumppu/MoonsecDeobfuscator" target="_blank">
                        <i class="fab fa-github"></i> Original Project
                    </a>
                    <a href="#" id="reportIssue">
                        <i class="fas fa-bug"></i> Report Issue
                    </a>
                    <a href="#" id="toggleInstructions">
                        <i class="fas fa-question-circle"></i> Help
                    </a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>Made with <i class="fas fa-heart" style="color: #ff4757;"></i> for the Lua community</p>
                <p class="version">v1.0.0</p>
            </div>
        </footer>
    </div>

    <!-- Loading Modal -->
    <div id="loadingModal" class="modal">
        <div class="modal-content">
            <div class="spinner"></div>
            <h3>Processing Code...</h3>
            <p id="loadingMessage">Deobfuscating your Lua script</p>
            <div class="progress-bar">
                <div class="progress"></div>
            </div>
        </div>
    </div>

    <!-- Instructions Modal -->
    <div id="instructionsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-graduation-cap"></i> How to Use</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="instruction-step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h4>Paste Your Code</h4>
                        <p>Copy and paste your obfuscated Lua code into the input editor. You can also use the "Load Example" button to try with sample code.</p>
                    </div>
                </div>
                <div class="instruction-step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h4>Analyze (Optional)</h4>
                        <p>Click "Analyze" to get information about the obfuscation techniques used in your code.</p>
                    </div>
                </div>
                <div class="instruction-step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h4>Deobfuscate</h4>
                        <p>Click "Deobfuscate Code" to process your script. The tool will automatically detect and remove obfuscation layers.</p>
                    </div>
                </div>
                <div class="instruction-step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h4>Export Results</h4>
                        <p>Copy, download, or save your deobfuscated code. Use the settings to customize the output format.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Batch Processing Modal -->
    <div id="batchModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-layer-group"></i> Batch Processing</h2>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="file-drop-area" id="fileDropArea">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <h3>Drop Lua files here</h3>
                    <p>or click to browse</p>
                    <input type="file" id="fileInput" multiple accept=".lua,.txt">
                </div>
                <div id="fileList" class="file-list"></div>
                <div class="modal-actions">
                    <button id="processBatch" class="btn btn-primary" disabled>
                        <i class="fas fa-play"></i> Process All
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="toast" class="toast"></div>

    <!-- Scripts -->
    <script src="deobfuscator.js"></script>
    <script src="lua-syntax.js"></script>
    <script src="script.js"></script>
</body>
                                                       </html>
